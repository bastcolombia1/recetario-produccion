<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <title>Recetario - La Areper√≠a</title>
  <link rel="stylesheet" href="css/styles.css">
</head>
<body>

  <!-- ======================== PANTALLA 1: LOGIN ======================== -->
  <div id="screen-login" class="screen active">
    <div class="login-container">
      <div class="logo">
        <h1>üç≥ La Areper√≠a</h1>
        <p class="subtitle">Control de Producci√≥n</p>
      </div>

      <div class="form-group">
        <label for="login-username">Usuario</label>
        <input type="text" id="login-username" class="input-field" placeholder="Nombre de usuario" autocomplete="username">
      </div>

      <div class="form-group">
        <label for="login-pin">PIN</label>
        <input type="password" id="login-pin" class="input-field" inputmode="numeric" maxlength="6" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" autocomplete="current-password">
      </div>

      <button id="btn-login" class="btn btn-primary btn-large">INGRESAR</button>

      <div id="login-error" class="error-message hidden"></div>
    </div>
  </div>

  <!-- ======================== PANTALLA 2: CALCULAR PRODUCCI√ìN ======================== -->
  <div id="screen-calculate" class="screen">
    <div class="header">
      <button id="btn-logout" class="btn-link">‚Üê Cerrar Sesi√≥n</button>
      <span id="user-name" class="user-badge"></span>
    </div>

    <div class="container">
      <h2>Nueva Producci√≥n</h2>

      <div class="form-group">
        <label for="recipe-select">Receta</label>
        <select id="recipe-select" class="input-field">
          <option value="">Seleccione una receta</option>
        </select>
      </div>

      <div id="ingredient-info" class="info-box hidden">
        <strong>Ingrediente principal:</strong>
        <span id="main-ingredient-name"></span>
      </div>

      <div class="form-group">
        <label for="quantity-input">Cantidad disponible</label>
        <div class="input-with-unit">
          <input type="number" id="quantity-input" class="input-field" step="0.01" placeholder="0.00" inputmode="decimal">
          <span id="quantity-unit" class="unit-label">kg</span>
        </div>
      </div>

      <button id="btn-calculate" class="btn btn-success btn-large">‚úÖ CALCULAR</button>

      <div id="calculation-results" class="hidden">
        <div class="divider"></div>

        <div class="result-box">
          <strong>Cantidad esperada:</strong>
          <span id="expected-qty" class="highlight"></span>
        </div>

        <h3>Insumos necesarios:</h3>
        <div id="ingredients-list" class="ingredients-list"></div>

        <button id="btn-start-production" class="btn btn-primary btn-large">üöÄ INICIAR PRODUCCI√ìN</button>
      </div>

      <div id="calculate-error" class="error-message hidden"></div>
    </div>
  </div>

  <!-- ======================== PANTALLA 3: PRODUCCI√ìN EN PROGRESO ======================== -->
  <div id="screen-production" class="screen">
    <div class="header">
      <h2 id="production-recipe-name">CARNE DESMECHADA</h2>
      <p id="production-code" class="production-code"></p>
    </div>

    <div class="container">
      <div class="divider"></div>

      <div class="phase-current">
        <label>Fase Actual:</label>
        <h3 id="current-phase-name" class="phase-name">üî• COCCI√ìN</h3>
      </div>

      <div class="time-info">
        <div class="time-item">
          <span class="time-label">Tiempo estimado:</span>
          <span id="estimated-time" class="time-value">45 min</span>
        </div>
        <div class="time-item">
          <span class="time-label">Tiempo transcurrido:</span>
          <span id="elapsed-time" class="time-value">23 min</span>
        </div>
      </div>

      <div class="progress-container">
        <label>Progreso:</label>
        <div class="progress-bar">
          <div id="progress-fill" class="progress-fill" style="width: 0%"></div>
        </div>
        <span id="progress-percentage" class="progress-text">0%</span>
      </div>

      <div class="divider"></div>

      <h4>Fases:</h4>
      <div id="phases-list" class="phases-list"></div>

      <div class="divider"></div>

      <div class="button-group">
        <button id="btn-pause" class="btn btn-warning">‚è∏Ô∏è PAUSAR</button>
        <button id="btn-resume" class="btn btn-warning hidden">‚ñ∂Ô∏è REANUDAR</button>
        <button id="btn-next-phase" class="btn btn-primary btn-large">‚ñ∂Ô∏è SIGUIENTE FASE</button>
      </div>

      <button id="btn-cancel-production" class="btn btn-danger">‚ùå CANCELAR</button>
    </div>
  </div>

  <!-- ======================== PANTALLA 4: FINALIZAR PRODUCCI√ìN ======================== -->
  <div id="screen-finalize" class="screen">
    <div class="header">
      <h2>‚úÖ FINALIZAR PRODUCCI√ìN</h2>
    </div>

    <div class="container">
      <div class="info-box">
        <div class="info-row">
          <span class="label">Receta:</span>
          <span id="finalize-recipe-name" class="value"></span>
        </div>
        <div class="info-row">
          <span class="label">C√≥digo:</span>
          <span id="finalize-production-code" class="value"></span>
        </div>
        <div class="info-row">
          <span class="label">Cantidad esperada:</span>
          <span id="finalize-expected-qty" class="value"></span>
        </div>
      </div>

      <div class="divider"></div>

      <div class="form-group">
        <label for="actual-qty-input">Cantidad real obtenida</label>
        <div class="input-with-unit">
          <input type="number" id="actual-qty-input" class="input-field input-large" step="0.01" placeholder="0.00" inputmode="decimal" required>
          <span id="actual-qty-unit" class="unit-label">kg</span>
        </div>
      </div>

      <div id="yield-info" class="result-box hidden">
        <strong>Rendimiento:</strong>
        <span id="yield-percentage" class="highlight"></span>
      </div>

      <div class="divider"></div>

      <div class="form-group">
        <label for="producer-select">Producido por</label>
        <select id="producer-select" class="input-field">
          <option value="">Seleccione el productor</option>
        </select>
      </div>

      <div class="form-group">
        <label for="notes-input">Observaciones (opcional)</label>
        <textarea id="notes-input" class="input-field" rows="3" placeholder="Escriba cualquier observaci√≥n sobre la producci√≥n..."></textarea>
      </div>

      <button id="btn-finish-production" class="btn btn-success btn-large">‚úÖ FINALIZAR Y GUARDAR</button>

      <button id="btn-back-to-production" class="btn btn-secondary">‚Üê VOLVER</button>

      <div id="finalize-error" class="error-message hidden"></div>
    </div>
  </div>

  <!-- ======================== PANTALLA 5: CONFIRMACI√ìN ======================== -->
  <div id="screen-success" class="screen">
    <div class="container center">
      <div class="success-icon">‚úÖ</div>
      <h2>¬°Producci√≥n Finalizada!</h2>
      <p class="success-message">La producci√≥n ha sido guardada exitosamente.</p>

      <div class="info-box">
        <div class="info-row">
          <span class="label">C√≥digo:</span>
          <span id="success-production-code" class="value"></span>
        </div>
        <div class="info-row">
          <span class="label">Rendimiento:</span>
          <span id="success-yield" class="value"></span>
        </div>
      </div>

      <button id="btn-new-production" class="btn btn-primary btn-large">üîÑ NUEVA PRODUCCI√ìN</button>
      <button id="btn-view-history" class="btn btn-secondary">üìã VER HISTORIAL</button>
    </div>
  </div>

  <!-- Scripts -->
  <script src="js/config.js"></script>
  <script src="js/api.js"></script>
  <script src="js/state.js"></script>
  <script src="js/ui.js"></script>
  <script src="js/app.js"></script>
</body>
</html>
